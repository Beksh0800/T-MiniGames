# üéâ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê!

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### ü§ñ Telegram Bot —Å aiogram
- **aiogram 3.13.0** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (`/start`, `/help`, `/profile`)
- –°–∏—Å—Ç–µ–º–∞ –º–µ–Ω—é —Å inline –∫–Ω–æ–ø–∫–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### üí≥ Telegram Payments
- **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π** —á–µ—Ä–µ–∑ Telegram
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `pre_checkout_query` –∏ `successful_payment`
- –ü–∞–∫–µ—Ç—ã –∑–≤—ë–∑–¥: 100‚≠ê($2), 500‚≠ê($8), 1000‚≠ê($15), 5000‚≠ê($60)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ –±–∞–ª–∞–Ω—Å

### üåê WebApp Frontend
- **TypeScript —Å–µ—Ä–≤–∏—Å** –¥–ª—è Telegram WebApp API
- React —Ö—É–∫ `useTelegramWebApp`
- –î–µ–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–∏–∑–∞—Ü–∏–∏ –∏ —Ç–∞–∫—Ç–∏–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
server/telegram_bot/
‚îú‚îÄ‚îÄ bot_config.py          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è aiogram
‚îú‚îÄ‚îÄ webhook.py             # Webhook/Polling
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ commands.py        # –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ payments.py        # –ü–ª–∞—Ç–µ–∂–∏
‚îî‚îÄ‚îÄ run_bot.py            # –ó–∞–ø—É—Å–∫ –≤ polling —Ä–µ–∂–∏–º–µ

client/telegram-mini-games/src/
‚îú‚îÄ‚îÄ services/telegramWebApp.ts
‚îú‚îÄ‚îÄ hooks/useTelegramWebApp.ts
‚îî‚îÄ‚îÄ components/TelegramIntegrationDemo.tsx
```

## üöÄ –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨:

### 1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É @BotFather:
```
/newbot
–ò–º—è: T-MiniGames Bot
Username: your_minigames_bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–ª–∞—Ç–µ–∂–∏:
```
/mybots ‚Üí –≤–∞—à –±–æ—Ç ‚Üí Bot Settings ‚Üí Payments
–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Stripe Test –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
```

### 3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ .env:
```bash
cp server/.env.example server/.env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
# –í —Ä–µ–∂–∏–º–µ polling (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
cd server
python run_bot.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ VS Code Task: "Start Telegram Bot"
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:
```bash
cd server
python test_telegram.py
```

## üí° –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

### üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:
1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ FastAPI** - webhook —É–∂–µ –≥–æ—Ç–æ–≤ –≤ `main.py`
2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å –ë–î** - –¥–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –∑–≤—ë–∑–¥
3. **–û–±–Ω–æ–≤–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TelegramIntegrationDemo`

### üì± Mini App –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω** —É @BotFather: Bot Settings ‚Üí Domain
2. **–î–æ–±–∞–≤—å—Ç–µ Menu Button** —Å URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. **–û–±–Ω–æ–≤–∏—Ç–µ CORS** –≤ FastAPI –¥–ª—è Telegram –¥–æ–º–µ–Ω–∞

### üéÆ –ò–≥—Ä–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
1. **–°–≤—è–∂–∏—Ç–µ –∏–≥—Ä—ã —Å –±–æ—Ç–æ–º** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
2. **–¢—É—Ä–Ω–∏—Ä—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏** —á–µ—Ä–µ–∑ –±–æ—Ç–∞
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Å–æ–±—ã—Ç–∏—è—Ö

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- `/start` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –ö–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å –∑–≤—ë–∑–¥—ã" ‚Üí –≤—ã–±–æ—Ä –ø–∞–∫–µ—Ç–∞ ‚Üí —Ç–µ—Å—Ç–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—ã" ‚Üí WebApp

### –¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã Stripe:
- `4242 4242 4242 4242` (Visa)
- `5555 5555 5555 4444` (Mastercard)

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì:

### –õ–æ–≥–∏ –±–æ—Ç–∞:
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f server/bot.log

# –í VS Code: Terminal ‚Üí "Start Telegram Bot"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook:
```bash
curl -X GET "https://your-domain.com/webhook/health"
```

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
1. **–°–º–µ–Ω–∏—Ç–µ SECRET_KEY** –≤ production
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è webhook
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å–∏** WebApp –¥–∞–Ω–Ω—ã—Ö
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ rate limiting**

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. **Webhook secret token** –¥–ª—è –∑–∞—â–∏—Ç—ã endpoint
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –¥–ª—è –∞—É–¥–∏—Ç–∞

## üéØ –ì–û–¢–û–í–´–ï –§–ò–ß–ò:

‚úÖ **Telegram Bot API** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  
‚úÖ **–ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - —Ç–µ—Å—Ç–æ–≤—ã–µ –∏ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏  
‚úÖ **WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≥–æ—Ç–æ–≤  
‚úÖ **–ö–æ–º–∞–Ω–¥—ã –∏ –º–µ–Ω—é** - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful degradation  
‚úÖ **TypeScript —Ç–∏–ø—ã** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏  

## üéä –ú–û–ù–ï–¢–ò–ó–ê–¶–ò–Ø –ì–û–¢–û–í–ê!

–¢–µ–ø–µ—Ä—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç –º–æ–∂–µ—Ç:
- üí∞ **–ü—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏** —á–µ—Ä–µ–∑ Telegram
- üéÆ **–ó–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∫ Mini App** –∏–∑ Telegram
- üì± **–†–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö** —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- üöÄ **–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å—Å—è** —á–µ—Ä–µ–∑ Telegram –∫–∞–Ω–∞–ª—ã
- üìä **–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å! üöÄ**
